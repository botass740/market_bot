# =========================
# Telegram
# =========================
BOT_TOKEN=
ADMIN_IDS=613340341
POSTING_CHANNEL=@testcanelbotparser

# =========================
# Database
# =========================
DATABASE_DSN=sqlite+aiosqlite:///./parser.db

# =========================
# Platform toggles
# =========================
ENABLE_WB=true
ENABLE_OZON=true
ENABLE_DETMIR=true

# =========================
# Parsing intervals (seconds)
# =========================
PARSING_WB_SECONDS=900        # 15 минут
PARSING_OZON_SECONDS=3600     # 60 минут
PARSING_DETMIR_SECONDS=1800   # 30 минут

# =========================
# Pipeline / parsing behavior
# =========================
PARSE_BATCH_SIZE=50
AUTO_CLEANUP_ENABLED=true
TARGET_PRODUCT_COUNT=3000
CLEANUP_INTERVAL_HOURS=24

# =========================
# Publishing / posting limits
# =========================
PUBLISHING_MAX_POSTS_PER_RUN=20
PUBLISHING_MAX_POSTS_PER_DAY=200
POSTING_MAX_POSTS_PER_HOUR=20
POSTING_DELAY=3.0
SKIP_PRODUCTS_WITHOUT_IMAGE=true

# =========================
# Filtering (global)
# =========================
FILTER_MIN_PRICE=0
FILTER_MAX_PRICE=0
FILTER_MIN_STOCK=0
FILTER_MIN_DISCOUNT_PERCENT=0
FILTER_CATEGORIES=

# =========================
# Publish thresholds (global)
# =========================
MIN_PRICE_DROP_PERCENT=10.0
MIN_DISCOUNT_INCREASE=20.0

# =========================
# DETMIR (DM)
# =========================
DM_COLLECT_ONLY_IN_STOCK=true
DM_COLLECT_STOCK_CHECK_CONCURRENCY=50
DM_COLLECT_STOCK_CHECK_TIMEOUT=20
DM_COLLECT_STOCK_CHECK_MAX_PASSES=3

DM_ROTATION_ENABLED=true
DM_ROTATION_DAYS=7
DM_ROTATION_FRACTION=0.2
DM_ROTATION_MAX_ATTEMPTS=6

# =========================
# WB rotation
# =========================
WB_ROTATION_ENABLED=true
WB_ROTATION_DAYS=7
WB_ROTATION_FRACTION=0.2
WB_ROTATION_REMOVE_OLDEST=true

# =========================
# OZON (disabled now, keep settings for later)
# =========================
OZON_CDP_URL=http://localhost:9222

OZON_COLLECT_TARGET=3000
OZON_SCROLL_DELAY_SEC=1.2
OZON_MAX_SCROLL_STEPS=500

OZON_MONITOR_BATCH_SIZE=100
OZON_MONITOR_REQUEST_DELAY=0.3
OZON_MONITOR_ERROR_DELAY=2.0
OZON_MONITOR_MAX_ERRORS=10

OZON_403_COOLDOWN_SEC=120
OZON_MAX_RECOVERIES=3

# =========================
# OZON rotation
# =========================
OZON_ROTATION_ENABLED=true
OZON_ROTATION_DAYS=7
OZON_ROTATION_FRACTION=0.2